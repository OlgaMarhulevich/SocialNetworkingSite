(this.webpackJsonpsamurai=this.webpackJsonpsamurai||[]).push([[0],{13:function(e,t,n){e.exports={profileBox:"ProfileInfo_profileBox__1v93W",profileInfo:"ProfileInfo_profileInfo__2IJgv",avatar:"ProfileInfo_avatar__3xuFq",div:"ProfileInfo_div__3At7N",title:"ProfileInfo_title__2t6A6",name:"ProfileInfo_name__1VvQB",description:"ProfileInfo_description__2yWda",status:"ProfileInfo_status__2G3BZ",inputBox:"ProfileInfo_inputBox__2oJBN",input:"ProfileInfo_input__f3lao",saveStatusBtn:"ProfileInfo_saveStatusBtn__2vNYc"}},14:function(e,t,n){e.exports={friendBox:"User_friendBox__Re3wp",imgBox:"User_imgBox__2lIVh",img:"User_img__quOXQ",followBtn:"User_followBtn__BzJjg",btn:"User_btn__3I3KW",red:"User_red__3CT_s",green:"User_green__SIhIk",infoBox:"User_infoBox__P_UN2",infoBottom:"User_infoBottom__1iPqy",title:"User_title__1-Sd-",name:"User_name__3NrJR",description:"User_description__21u9g",showBtn:"User_showBtn__1f2RP",activePage:"User_activePage__3SHjj",pages:"User_pages__3ZTPc",disabled:"User_disabled__2Oj7g"}},164:function(e,t,n){},169:function(e,t,n){e.exports={logo:"Footer_logo__3ACxa"}},22:function(e,t,n){e.exports={messageComponent:"Message_messageComponent__2_iBn",messageComponentMe:"Message_messageComponentMe__1w1Wo",img:"Message_img__3-T8Q",time:"Message_time__oGKVI",messageBabble:"Message_messageBabble__2EWNh",messageBabbleMe:"Message_messageBabbleMe__1DfI-",tail:"Message_tail__3RUok",tailMe:"Message_tailMe__m4hsZ",messageBox:"Message_messageBox__1ynL0",messageBoxMe:"Message_messageBoxMe__3KXIW"}},27:function(e,t,n){e.exports={navbar:"Navbar_navbar__CLYHD",other:"Navbar_other__vqMC5",active:"Navbar_active__3mbhk"}},293:function(e,t,n){"use strict";n.r(t);var s=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,294)).then((function(t){var n=t.getCLS,s=t.getFID,a=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),s(e),a(e),i(e),r(e)}))},a=(n(164),n(69)),i=n.n(a),r=n(1),o=n.n(r),c=n(11),u=n(17),l=n(18),d=n(20),j=n(19),p=n(6),f=n(93),m=n.n(f),b=(n(169),n(0));var g=function(){return Object(b.jsxs)("footer",{children:["\xa9 My first site on \xa0",Object(b.jsx)("a",{href:"#",children:"React"})]})},_=n(27),O=n.n(_),h=n(10),x=n(94),v=n.n(x),S=n(73),N=n.n(S);var E=function(e){return Object(b.jsxs)("div",{className:N.a.friend,children:[Object(b.jsx)(c.b,{to:"/profile/"+e.id,children:Object(b.jsx)("img",{alt:e.name,src:e.img,className:N.a.img})}),Object(b.jsx)("p",{className:N.a.name,children:e.name})]})},P=n.p+"static/media/unknown.dc967cb3.png";var w,I=function(e){var t=e.friends.map((function(e){return Object(b.jsx)(E,{id:e.id,name:e.name.length>7?e.name.slice(0,6)+"...":e.name,img:e.photos.small||P},e.id)}));return Object(b.jsxs)("div",{children:[Object(b.jsx)("p",{className:v.a.title,children:"Friends"}),Object(b.jsx)("div",{className:v.a.friends,children:t})]})},T=n(135),C=function(e){return e.profile.posts},M=function(e){return e.profile.profile},F=function(e){return e.profile.isFetching},A=function(e){return e.profile.profileStatus},U=function(e){return e.auth.isAuth},y=function(e){return e.auth.login},D=function(e){return e.auth.id},L=function(e){return e.dialogs.dialogs},B=function(e){return e.users.users},k=Object(T.a)(B,(function(e){return e.users.filterForSearch}),(function(e,t){return e.filter((function(e){return e.name.toUpperCase().indexOf(t.toUpperCase())>-1}))})),R=function(e){return e.users.pageSize},G=function(e){return e.users.totalUsersCount},H=function(e){return e.users.activePage},W=function(e){return e.users.isLoading},z=function(e){return e.users.isFollowing},J=n(24),K=n(3);!function(e){e.ADD_FRIEND="ADD-FRIEND",e.REMOVE_FRIEND="REMOVE-FRIEND",e.SET_FRIENDS="SET-FRIENDS"}(w||(w={}));var V={friends:[]},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w.ADD_FRIEND:return Object(K.a)(Object(K.a)({},e),{},{friends:[].concat(Object(J.a)(e.friends),[t.friend])});case w.REMOVE_FRIEND:return Object(K.a)(Object(K.a)({},e),{},{friends:e.friends.filter((function(e){return e.id!==t.friendId}))});case w.SET_FRIENDS:return Object(K.a)(Object(K.a)({},e),{},{friends:[].concat(Object(J.a)(e.friends),Object(J.a)(t.users.filter((function(e){return e.followed}))))});default:return e}},Y=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.setFriends(this.props.users)}},{key:"render",value:function(){return this.props.users.length?Object(b.jsx)(I,{friends:this.props.friends}):""}}]),n}(o.a.Component),Q=Object(h.b)((function(e){return{users:B(e),friends:e.friends.friends}}),{setFriends:function(e){return{users:e,type:w.SET_FRIENDS}}})(Y);var Z=function(){return Object(b.jsx)("aside",{children:Object(b.jsxs)("nav",{className:O.a.navbar,children:[Object(b.jsx)(c.b,{to:"/profile",activeClassName:O.a.active,children:"Profile"}),Object(b.jsx)(c.b,{to:"/dialogs",activeClassName:O.a.active,children:"Messages"}),Object(b.jsx)(c.b,{to:"/news",activeClassName:O.a.active,children:"News"}),Object(b.jsx)(c.b,{to:"/music",activeClassName:O.a.active,children:"Music"}),Object(b.jsx)(c.b,{to:"/users",activeClassName:O.a.active,className:O.a.other,children:"Find users"}),Object(b.jsx)(c.b,{to:"/settings",activeClassName:O.a.active,className:O.a.other,children:"Settings"}),Object(b.jsx)(Q,{})]})})};var X=function(){return Object(b.jsx)("div",{children:"Page under construction"})};var $=function(){return Object(b.jsx)("div",{children:"Page under construction"})};var ee=function(){return Object(b.jsx)("div",{children:"Page under construction"})},te=n(74),ne=n.n(te),se=n(75),ae=n.n(se);var ie=function(e){return Object(b.jsx)("div",{children:Object(b.jsxs)(c.b,{to:"/dialogs/"+e.id,className:ae.a.dialog,activeClassName:ae.a.active,children:[Object(b.jsx)("img",{className:ae.a.img,src:e.img,alt:e.name}),e.name]})})},re=n(36),oe=n.n(re),ce=n(22),ue=n.n(ce);var le=function(e){return Object(b.jsxs)("div",{className:"Me"===e.name?ue.a.messageComponentMe:ue.a.messageComponent,children:[Object(b.jsx)("img",{className:ue.a.img,src:e.img,alt:"avatar"}),Object(b.jsxs)("div",{className:"Me"===e.name?ue.a.messageBabbleMe:ue.a.messageBabble,children:[Object(b.jsx)("div",{className:"Me"===e.name?ue.a.tailMe:ue.a.tail}),Object(b.jsxs)("div",{className:"Me"===e.name?ue.a.messageBoxMe:ue.a.messageBox,children:[Object(b.jsx)("div",{className:ue.a.message,children:e.message}),Object(b.jsx)("div",{className:ue.a.time,children:"22:00"})]})]})]})},de=n(132),je=n(133),pe=function(e){return e?void 0:"Field is required!"},fe=function(e){return function(t){return t&&t.length>e?"Must be ".concat(e," characters or less!"):void 0}},me=function(e){return function(t){return t&&t.length<e?"Must be at least ".concat(e," characters!"):void 0}},be=n(55),ge=n(56),_e=n.n(ge),Oe=function(e){var t=e.input,n=e.meta,s=Object(be.a)(e,["input","meta"]),a=n.error&&n.touched;return Object(b.jsxs)("div",{className:_e.a.formControl+" "+(a?_e.a.error:""),children:[a&&Object(b.jsx)("span",{children:n.error}),Object(b.jsx)("div",{children:Object(b.jsx)("textarea",Object(K.a)(Object(K.a)({},t),s))})]})},he=function(e){var t=e.input,n=e.meta,s=Object(be.a)(e,["input","meta"]),a=n.error&&n.touched;return Object(b.jsxs)("div",{className:_e.a.formControl+" "+(a?_e.a.error:""),children:[a&&Object(b.jsx)("span",{children:n.error}),Object(b.jsx)("div",{children:Object(b.jsx)("input",Object(K.a)(Object(K.a)({},t),s))})]})},xe=Object(je.a)({form:"dialog"})((function(e){return Object(b.jsxs)("form",{onSubmit:e.handleSubmit,className:oe.a.sendBox,children:[Object(b.jsx)("div",{children:Object(b.jsx)(de.a,{placeholder:"Text your message...",component:Oe,name:"newMessage",className:oe.a.textarea,validate:[pe]})}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{className:oe.a.button,children:"Send"})})]})})),ve=function(e){var t=e.dialog.messages.map((function(e,t){return Object(b.jsx)(le,{name:e.name,img:e.img,message:e.message},t)}));return Object(b.jsxs)("div",{className:oe.a.dialogsMessages,children:[Object(b.jsx)("div",{className:oe.a.messages,children:t}),Object(b.jsx)(xe,{onSubmit:function(t){e.addMessage(e.dialog.id,t.newMessage)}})]})};var Se=function(e){var t=e.dialogs.map((function(e){return Object(b.jsx)(ie,{img:e.img,id:e.id,name:e.name},e.id)}));return Object(b.jsxs)("div",{className:ne.a.dialogPage,children:[Object(b.jsx)("div",{className:ne.a.dialogsColumn,children:t}),Object(b.jsx)("div",{className:ne.a.messagesColumn,children:Object(b.jsx)(p.b,{path:"/dialogs/:dialogID",render:function(t){var n=t.match.params.dialogID,s=e.dialogs.find((function(e){return e.id===+n}));return s&&Object(b.jsx)(ve,{dialog:s,addMessage:function(t,n){return e.addMessage(t,n)},changeNewMessage:function(t,n){return e.changeNewMessage(t,n)}})}})})]})},Ne="ADD-MESSAGE",Ee={dialogs:[{id:1,name:"Nick",img:"https://pixelbox.ru/wp-content/uploads/2020/11/ava-maincraft-youtube-76.jpg",messages:[{message:"Hi!",name:"Nick",img:"https://pixelbox.ru/wp-content/uploads/2020/11/ava-maincraft-youtube-76.jpg"},{message:"How are you?",name:"Nick",img:"https://pixelbox.ru/wp-content/uploads/2020/11/ava-maincraft-youtube-76.jpg"},{message:"Yo",name:"Me",img:"https://pixelbox.ru/wp-content/uploads/2021/02/mult-ava-instagram-58-696x696.jpg"},{message:"I'm fine! How're you?",name:"Me",img:"https://pixelbox.ru/wp-content/uploads/2021/02/mult-ava-instagram-58-696x696.jpg"}]},{id:2,name:"Jhon",img:"https://vraki.net/sites/default/files/inline/images/30_55.jpg",messages:[{message:"Hi!",name:"Jhon",img:"https://vraki.net/sites/default/files/inline/images/30_55.jpg"}]},{id:3,name:"Anna",img:"https://pixelbox.ru/wp-content/uploads/2021/04/ava-mult-vk-78.jpg",messages:[{message:"Hi!",name:"Anna",img:"https://pixelbox.ru/wp-content/uploads/2021/04/ava-mult-vk-78.jpg"}]}]},Pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ne:if(!t.newMessage.trim())return Object(K.a)({},e);var n={message:t.newMessage,name:"Me",img:"https://pixelbox.ru/wp-content/uploads/2021/02/mult-ava-instagram-58-696x696.jpg"};return Object(K.a)(Object(K.a)({},e),{},{dialogs:e.dialogs.map((function(e){return e.id===t.id?Object(K.a)(Object(K.a)({},e),{},{messages:[].concat(Object(J.a)(e.messages),[n])}):e}))});default:return e}},we=function(e){return{isAuth:e.auth.isAuth}};function Ie(e){return Object(h.b)(we,{})((function(t){var n=t.isAuth,s=Object(be.a)(t,["isAuth"]);return n?Object(b.jsx)(e,Object(K.a)({},s)):Object(b.jsx)(p.a,{to:"/login"})}))}var Te=n(9),Ce=Object(Te.d)(Object(h.b)((function(e){return{dialogs:L(e)}}),{addMessage:function(e,t){return{type:Ne,id:e,newMessage:t}}}),Ie)(Se),Me=n(13),Fe=n.n(Me),Ae=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(u.a)(this,n);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={editMode:!1,status:e.props.status},e.onEditMode=function(){e.setState({editMode:!0})},e.offEditMode=function(){e.setState({editMode:!1}),e.props.updateProfileStatus(e.state.status)},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return Object(b.jsx)(b.Fragment,{children:this.state.editMode?Object(b.jsx)("div",{className:Fe.a.inputBox,children:Object(b.jsx)("input",{type:"text",value:this.state.status,autoFocus:!0,className:Fe.a.input,onBlur:this.offEditMode,onChange:function(t){return e.setState({status:t.currentTarget.value})},onKeyPress:function(t){"Enter"===t.key&&e.props.updateProfileStatus(t.currentTarget.value)}})}):Object(b.jsx)("div",{className:Fe.a.status,onDoubleClick:this.onEditMode,children:this.props.status})})}}]),n}(o.a.Component);var Ue=function(e){return Object(b.jsxs)("div",{className:Fe.a.profileBox,children:[Object(b.jsx)("img",{className:Fe.a.avatar,src:e.profile.photos.large||P,alt:e.profile.fullName}),Object(b.jsxs)("div",{className:Fe.a.profileInfo,children:[Object(b.jsx)("div",{className:Fe.a.div,children:Object(b.jsx)("p",{className:Fe.a.name,children:e.profile.fullName})}),Object(b.jsx)("div",{className:Fe.a.div,children:Object(b.jsx)(Ae,{status:e.profileStatus||"Nothing yet...",updateProfileStatus:e.updateProfileStatus})}),Object(b.jsxs)("div",{className:Fe.a.div,children:[Object(b.jsx)("p",{className:Fe.a.title,children:"I'm looking a job: "}),Object(b.jsx)("p",{className:Fe.a.description,children:e.profile.lookingForAJob?"yes":"no"})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("p",{className:Fe.a.title,children:"About me: "}),Object(b.jsx)("p",{className:Fe.a.description,children:e.profile.aboutMe||"Nothing yet..."})]})]})]})},ye=n(57),De=n.n(ye),Le=n(37),Be=n.n(Le),ke=n(32),Re=n.n(ke);var Ge=function(e){return Object(b.jsxs)("div",{className:Re.a.post,children:[Object(b.jsxs)("div",{className:Re.a.postContent,children:[Object(b.jsx)("img",{className:Re.a.avatar,src:"https://pixelbox.ru/wp-content/uploads/2021/02/mult-ava-instagram-58-696x696.jpg",alt:"Avatar"}),Object(b.jsx)("div",{className:Re.a.message,children:e.message})]}),Object(b.jsxs)("div",{children:[Object(b.jsxs)("span",{className:Re.a.likesCount,children:[e.likesCount," likes"]}),Object(b.jsx)("button",{onClick:function(){e.addLike(e.id)},className:Re.a.like,children:"Like!"}),Object(b.jsx)("button",{onClick:function(){e.removePost(e.id)},className:Re.a.button,children:"Remove post"})]})]})},He=fe(200),We=me(2),ze=Object(je.a)({form:"post"})((function(e){return Object(b.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(b.jsx)("div",{children:Object(b.jsx)(de.a,{placeholder:"Your message...",component:Oe,name:"newMessage",className:Be.a.textarea,validate:[pe,He,We]})}),Object(b.jsx)("div",{className:Be.a.buttons,children:Object(b.jsx)("button",{className:Be.a.button,children:"Add post"})})]})}));var Je=function(e){var t=e.posts.map((function(t){return Object(b.jsx)(Ge,{id:t.id,message:t.message,likesCount:t.likesCount,removePost:function(t){return e.removePost(t)},addLike:function(t){return e.addLike(t)}},t.id)}));return Object(b.jsxs)("div",{children:[Object(b.jsx)("p",{className:Be.a.title,children:"My Posts"}),Object(b.jsx)("div",{children:Object(b.jsx)(ze,{onSubmit:function(t){return e.addPost(t.newMessage)}})}),Object(b.jsx)("div",{className:Be.a.posts,children:t})]})};var Ke,Ve=function(e){return Object(b.jsxs)("div",{children:[Object(b.jsx)(Ue,{profile:e.profile,profileStatus:e.profileStatus,updateProfileStatus:e.updateProfileStatus}),Object(b.jsxs)("div",{className:De.a.imageBox,children:[Object(b.jsx)("img",{alt:"arrow-left",src:"https://piaspb.ru/img/new-img/arrows-l.png",className:De.a.arrow}),Object(b.jsx)("img",{alt:"arrow-right",src:"https://piaspb.ru/img/new-img/arrows-l.png",className:"".concat(De.a.arrow," ").concat(De.a.arrowRight)})]}),Object(b.jsx)(Je,Object(K.a)({},e))]})},qe=n(137),Ye=n.n(qe).a.create({baseURL:"https://social-network.samuraijs.com/api/1.0",withCredentials:!0,headers:{"API-KEY":"ff96c8c6-9a67-45a6-8e7e-64655709b2bd"}}),Qe=function(e,t){return Ye.get("users?count=".concat(e,"&page=").concat(t)).then((function(e){return e.data}))},Ze=function(e){return Ye.delete("follow/".concat(e)).then((function(e){return e.data}))},Xe=function(e){return Ye.post("follow/".concat(e)).then((function(e){return e.data}))},$e=function(e){return Ye.get("profile/".concat(e)).then((function(e){return e.data}))},et=function(e){return Ye.get("profile/status/".concat(e)).then((function(e){return e.data}))},tt=function(e){return Ye.put("/profile/status",{status:e}).then((function(e){return e.data}))},nt=function(){return Ye.get("auth/me").then((function(e){return e.data}))},st=function(e,t,n){return Ye.post("auth/login",{email:e,password:t,rememberMe:n}).then((function(e){return e.data}))},at=function(){return Ye.delete("auth/login").then((function(e){return e.data}))};!function(e){e.ADD_POST="ADD-POST",e.REMOVE_POST="REMOVE-POST",e.ADD_LIKE="ADD-LIKE",e.SET_PROFILE="SET-PROFILE",e.TOGGLE_FETCHING="SONET/PROFILE/TOGGLE-FETCHING",e.SET_PROFILE_STATUS="SET-PROFILE-STATUS"}(Ke||(Ke={}));var it,rt={profile:{aboutMe:"",contacts:{facebook:"",website:"",vk:"",twitter:"",instagram:"",youtube:"",github:"",mainLink:""},lookingForAJob:!1,lookingForAJobDescription:"",fullName:"",userId:1,photos:{small:"",large:""}},profileStatus:"",posts:[{id:1,message:"It is my first post!",likesCount:25},{id:2,message:"How are you?",likesCount:15}],isFetching:!1},ot=function(e){return{type:Ke.SET_PROFILE,profile:e}},ct=function(e){return{fetching:e,type:Ke.TOGGLE_FETCHING}},ut=function(e){return{profileStatus:e,type:Ke.SET_PROFILE_STATUS}},lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ke.ADD_POST:if(""===t.newMessage)return e;var n={id:e.posts.length+1,message:t.newMessage,likesCount:0};return Object(K.a)(Object(K.a)({},e),{},{posts:[].concat(Object(J.a)(e.posts),[n])});case Ke.REMOVE_POST:return confirm("Delete this post?")?Object(K.a)(Object(K.a)({},e),{},{posts:e.posts.filter((function(e){return e.id!==t.id}))}):e;case Ke.ADD_LIKE:return Object(K.a)(Object(K.a)({},e),{},{posts:e.posts.map((function(e){return e.id===t.id?Object(K.a)(Object(K.a)({},e),{},{likesCount:++e.likesCount}):e}))});case Ke.SET_PROFILE:return Object(K.a)(Object(K.a)({},e),{},{profile:t.profile});case Ke.TOGGLE_FETCHING:return Object(K.a)(Object(K.a)({},e),{},{isFetching:t.fetching});case Ke.SET_PROFILE_STATUS:return Object(K.a)(Object(K.a)({},e),{},{profileStatus:t.profileStatus});default:return e}},dt=n(99),jt=n.n(dt),pt=n.p+"static/media/loading.bb27ba0a.gif",ft=function(){return Object(b.jsxs)("div",{className:jt.a.loadingBox,children:[Object(b.jsx)("img",{alt:"loading...",className:jt.a.loadingGif,src:pt}),Object(b.jsx)("div",{children:"Loading..."})]})},mt=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params.userID||this.props.userId.toString();e&&(this.props.getProfile(e),this.props.getProfileStatus(e))}},{key:"componentDidUpdate",value:function(e,t,n){if(this.props.match.params.userID!==e.match.params.userID){var s=this.props.match.params.userID||this.props.userId.toString();s&&(this.props.getProfile(s),this.props.getProfileStatus(s))}}},{key:"render",value:function(){return Object(b.jsx)(b.Fragment,{children:this.props.isFetching?Object(b.jsx)(Ve,Object(K.a)({},this.props)):Object(b.jsx)(ft,{})})}}]),n}(o.a.Component),bt=Object(Te.d)(Object(h.b)((function(e){return{profile:M(e),posts:C(e),isFetching:F(e),profileStatus:A(e),userId:D(e),isAuth:U(e)}}),{addPost:function(e){return{type:Ke.ADD_POST,newMessage:e}},removePost:function(e){return{type:Ke.REMOVE_POST,id:e}},addLike:function(e){return{type:Ke.ADD_LIKE,id:e}},setProfile:ot,setFetching:ct,getProfile:function(e){return function(t){return t(ct(!1)),$e(e).then((function(e){t(ot(e)),t(ct(!0))}))}},getProfileStatus:function(e){return function(t){return t(ct(!1)),et(e).then((function(e){t(ut(e)),t(ct(!0))}))}},updateProfileStatus:function(e){return function(t){t(ct(!1)),tt(e).then((function(n){0===n.resultCode&&(t(ut(e)),t(ct(!0)))}))}}}),p.f,Ie)(mt),gt=function(e,t,n,s){return e.map((function(e){return e[t]===n?Object(K.a)(Object(K.a)({},e),s):e}))};!function(e){e.CHANGE_FOLLOWED_STATUS="SONET/USERS/CHANGE-FOLLOWED-STATUS",e.SET_USERS="SONET/USERS/SET-USERS",e.CHANGE_PAGE="SONET/USERS/CHANGE-PAGE",e.SET_USERS_COUNT="SONET/USERS/SET-USERS-COUNT",e.SET_LOADING="SONET/USERS/SET-LOADING",e.SET_FOLLOWING="SONET/USERS/SET-FOLLOWING",e.SET_FILTER="SONET/USERS/SET-FILTER"}(it||(it={}));var _t={users:[],pageSize:10,totalUsersCount:0,activePage:1,isLoading:!0,isFollowing:[],filterForSearch:""},Ot=function(e,t){return{userID:e,isFollow:t,type:it.CHANGE_FOLLOWED_STATUS}},ht=function(e){return{loading:e,type:it.SET_LOADING}},xt=function(e,t){return{following:e,userId:t,type:it.SET_FOLLOWING}},vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_t,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case it.CHANGE_FOLLOWED_STATUS:return Object(K.a)(Object(K.a)({},e),{},{users:gt(e.users,"id",t.userID,{followed:t.isFollow})});case it.SET_USERS:return Object(K.a)(Object(K.a)({},e),{},{users:Object(J.a)(t.users)});case it.CHANGE_PAGE:return Object(K.a)(Object(K.a)({},e),{},{activePage:t.page});case it.SET_USERS_COUNT:return Object(K.a)(Object(K.a)({},e),{},{totalUsersCount:t.usersCount});case it.SET_LOADING:return Object(K.a)(Object(K.a)({},e),{},{isLoading:t.loading});case it.SET_FOLLOWING:return Object(K.a)(Object(K.a)({},e),{},{isFollowing:t.following?[].concat(Object(J.a)(e.isFollowing),[t.userId]):e.isFollowing.filter((function(e){return e!==t.userId}))});case it.SET_FILTER:return Object(K.a)(Object(K.a)({},e),{},{filterForSearch:t.filter});default:return e}},St=n(101),Nt=n(45),Et=n.n(Nt),Pt=n(58),wt=n.n(Pt),It=function(e){for(var t=e.totalUsersCount,n=e.pageSize,s=e.onClickPage,a=e.activePage,i=Math.ceil(t/n),r=[],o=1;o<=5;o++)r.push(o);return r.push("..."),r.push(i),Object(b.jsx)("div",{children:r.map((function(e){return"..."===e?Object(b.jsx)("span",{className:wt.a.pages,children:"..."},e+"page"):Object(b.jsx)("span",{onClick:function(){return s(+e)},className:a===e?"".concat(wt.a.activePage," ").concat(wt.a.pages):wt.a.pages,children:e},e+" page")}))})},Tt=n(14),Ct=n.n(Tt),Mt=function(e){var t=e.user,n=e.unfollow,s=e.follow,a=e.isAuth,i=e.isFollowing,r=Object(h.c)();return Object(b.jsxs)("div",{className:Ct.a.friendBox,children:[Object(b.jsxs)("div",{className:Ct.a.imgBox,children:[Object(b.jsx)(c.b,{to:"/profile/"+t.id,children:Object(b.jsx)("img",{alt:t.name,src:t.photos.small||P,className:Ct.a.img})}),Object(b.jsx)("button",{onClick:function(){t.followed?(n(t.id),r({friendId:t.id,type:w.REMOVE_FRIEND})):(s(t.id),r({friend:t,type:w.ADD_FRIEND}))},className:"".concat(Ct.a.followBtn," ").concat(t.followed?Ct.a.red:Ct.a.green," ").concat(!a||i.includes(t.id)?Ct.a.disabled:""),disabled:!a||i.some((function(e){return e===t.id})),children:t.followed?"UNFOLLOW":"FOLLOW"})]}),Object(b.jsxs)("div",{className:Ct.a.infoBox,children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("p",{className:"".concat(Ct.a.title," ").concat(Ct.a.name),children:"Name: "}),Object(b.jsx)("p",{className:"".concat(Ct.a.description," ").concat(Ct.a.name),children:t.name})]}),Object(b.jsx)("div",{className:Ct.a.infoBottom,children:Object(b.jsxs)("div",{children:[Object(b.jsx)("p",{className:Ct.a.title,children:"Status: "}),Object(b.jsx)("p",{className:Ct.a.description,children:t.status||"Nothing yet..."})]})})]})]})},Ft=function(e){var t=Object(r.useState)(""),n=Object(St.a)(t,2),s=n[0],a=n[1],i=Object(r.useState)(null),o=Object(St.a)(i,2),c=o[0],u=o[1];return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("p",{className:Et.a.titlePage,children:"All users in SoNet"}),Object(b.jsxs)("div",{className:Et.a.container,children:[Object(b.jsx)("div",{className:Et.a.searchBox,children:Object(b.jsx)("input",{className:Et.a.search,placeholder:"Search...",value:s,onChange:function(t){var n=t.currentTarget.value;a(n),c&&clearTimeout(c);var s=setTimeout((function(){e.setFilter(n)}),1e3);u(s)}})}),!e.users.length&&Object(b.jsx)("span",{className:Et.a.title,style:{margin:"20px"},children:"Users not found"}),e.users.map((function(t){return Object(b.jsx)(Mt,{user:t,follow:e.follow,unfollow:e.unfollow,isAuth:e.isAuth,isFollowing:e.isFollowing},t.id)})),Object(b.jsx)(It,{totalUsersCount:e.totalUsersCount,pageSize:e.pageSize,onClickPage:e.onClickPage,activePage:e.activePage})]})]})},At=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(u.a)(this,n);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onClickPage=function(t){e.props.changePage(t),e.props.getUsers(e.props.pageSize,t)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.getUsers(this.props.pageSize,this.props.activePage)}},{key:"render",value:function(){return Object(b.jsx)(b.Fragment,{children:this.props.isLoading?Object(b.jsx)(ft,{}):Object(b.jsx)(Ft,Object(K.a)(Object(K.a)({},this.props),{},{onClickPage:this.onClickPage}))})}}]),n}(o.a.Component),Ut=Object(Te.d)(Object(h.b)((function(e){return{users:k(e),pageSize:R(e),totalUsersCount:G(e),activePage:H(e),isLoading:W(e),isFollowing:z(e),isAuth:U(e)}}),{changePage:function(e){return{page:e,type:it.CHANGE_PAGE}},getUsers:function(e,t){return function(n){n(ht(!0)),Qe(e,t).then((function(e){n({usersCount:e.totalCount,type:it.SET_USERS_COUNT}),n(ht(!1)),n({users:e.items,type:it.SET_USERS})}))}},follow:function(e){return function(t){t(xt(!0,e)),Xe(e).then((function(n){0===n.resultCode&&(t(Ot(e,!0)),t(xt(!1,e)))}))}},unfollow:function(e){return function(t){t(xt(!0,e)),Ze(e).then((function(n){0===n.resultCode&&(t(Ot(e,!1)),t(xt(!1,e)))}))}},setFilter:function(e){return{filter:e,type:it.SET_FILTER}}}))(At),yt=n(59),Dt=n.n(yt);var Lt,Bt=function(e){return Object(b.jsxs)("header",{children:[Object(b.jsxs)("div",{className:Dt.a.logo,children:[Object(b.jsx)("img",{alt:"logo",src:"https://img.apksum.com/9f/nicola.web/2.7/icon.png"}),Object(b.jsx)(c.b,{to:"/profile",children:"SoNet"})]}),e.isAuth?Object(b.jsxs)("div",{className:Dt.a.loginBox,children:[Object(b.jsx)(c.b,{to:"/profile/".concat(e.userId),children:Object(b.jsxs)("div",{className:Dt.a.greeting,children:["Hello, ",e.login,"!"]})}),Object(b.jsx)("button",{className:Dt.a.logoutBtn,onClick:e.logout,children:"LogOut"})]}):Object(b.jsx)(c.b,{to:"/login",children:"LogIn"})]})},kt=n(60),Rt=n.n(kt),Gt=n(100),Ht=n(40);!function(e){e.SET_USER_DATA="SET-USER-DATA"}(Lt||(Lt={}));var Wt={id:null,email:null,login:null,isAuth:!1},zt=function(e,t,n,s){return{type:Lt.SET_USER_DATA,payload:{id:e,email:t,login:n,isAuth:s}}},Jt=function(){return function(e){return nt().then((function(t){0===t.resultCode&&e(zt(t.data.id,t.data.email,t.data.login,!0))}))}},Kt=function(){return function(){var e=Object(Gt.a)(Rt.a.mark((function e(t){return Rt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,at();case 2:0===e.sent.resultCode&&t(zt(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Lt.SET_USER_DATA:return Object(K.a)(Object(K.a)({},e),t.payload);default:return e}},qt=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(Bt,Object(K.a)({},this.props))})}}]),n}(o.a.Component),Yt=Object(h.b)((function(e){return{isAuth:U(e),login:y(e),userId:D(e)}}),{setAuthUserData:zt,logout:Kt})(qt),Qt=n(38),Zt=n.n(Qt),Xt=fe(25),$t=me(6),en=Object(je.a)({form:"login"})((function(e){return Object(b.jsxs)("form",{onSubmit:e.handleSubmit,className:Zt.a.form,children:[e.error&&Object(b.jsx)("div",{className:Zt.a.formSummaryError,children:e.error}),Object(b.jsx)("div",{children:Object(b.jsx)(de.a,{placeholder:"Login",component:he,name:"email",validate:[pe,Xt,$t]})}),Object(b.jsx)("div",{children:Object(b.jsx)(de.a,{placeholder:"Password",component:he,name:"password",type:"password",validate:[pe,Xt,$t]})}),Object(b.jsxs)("label",{className:Zt.a.rememberMe,children:[Object(b.jsx)(de.a,{type:"checkbox",component:he,name:"rememberMe"}),"Remember me "]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{className:Zt.a.button,children:"Login"})})]})})),tn=Object(h.b)((function(e){return{isAuth:e.auth.isAuth}}),{login:function(e,t,n){return function(){var s=Object(Gt.a)(Rt.a.mark((function s(a){var i,r;return Rt.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,st(e,t,n);case 2:0===(i=s.sent).resultCode?a(Jt()):(r=i.messages.length>0?i.messages[0]:"Some error",a(Object(Ht.a)("login",{_error:r})));case 4:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()},logout:Kt})((function(e){return e.isAuth?Object(b.jsx)(p.a,{to:"/profile"}):Object(b.jsxs)("div",{className:Zt.a.loginPage,children:[Object(b.jsx)("h1",{children:"LOGIN PAGE"}),Object(b.jsx)(en,{onSubmit:function(t){e.login(t.email,t.password,t.rememberMe)}})]})})),nn={isInitialized:!1},sn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-INITIALIZED":return Object(K.a)(Object(K.a)({},e),{},{isInitialized:!0});default:return e}},an=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.initializedApp()}},{key:"render",value:function(){return this.props.isInitialized?Object(b.jsxs)("div",{className:m.a.appWrapper,children:[Object(b.jsx)(Yt,{}),Object(b.jsxs)("main",{children:[Object(b.jsx)(Z,{}),Object(b.jsxs)("div",{className:m.a.content,children:[Object(b.jsx)(p.b,{path:"/dialogs",component:Ce}),Object(b.jsx)(p.b,{path:"/users",component:Ut}),Object(b.jsx)(p.b,{path:"/news",component:X}),Object(b.jsx)(p.b,{path:"/music",component:$}),Object(b.jsx)(p.b,{path:"/settings",component:ee}),Object(b.jsx)(p.b,{path:"/login",component:tn}),Object(b.jsx)(p.b,{path:"/profile/:userID?",component:bt}),Object(b.jsx)(p.b,{exact:!0,path:"/SocialNetworkingSite",component:bt}),Object(b.jsx)(p.b,{exact:!0,path:"/",component:bt})]})]}),Object(b.jsx)(g,{})]}):Object(b.jsx)(ft,{})}}]),n}(o.a.Component),rn=Object(Te.d)(p.f,Object(h.b)((function(e){return{isInitialized:e.app.isInitialized}}),{initializedApp:function(){return function(e){Promise.all([e(Jt())]).then((function(){return e({type:"SET-INITIALIZED"})}))}}}))(an),on=n(138),cn=n(134),un=Object(Te.c)({profile:lt,dialogs:Pe,friends:q,users:vt,auth:Vt,form:cn.a,app:sn}),ln=Object(Te.e)(un,Object(Te.a)(on.a));window.state=ln.getState();var dn=ln;i.a.render(Object(b.jsx)(o.a.StrictMode,{children:Object(b.jsx)(c.a,{children:Object(b.jsx)(h.a,{store:dn,children:Object(b.jsx)(rn,{})})})}),document.getElementById("root")),s()},32:function(e,t,n){e.exports={post:"Post_post__A0EJd",postContent:"Post_postContent__dePS0",avatar:"Post_avatar__1wBwP",message:"Post_message__3raFK",like:"Post_like__oViQh",likesCount:"Post_likesCount__R9C9-",button:"Post_button__2dr5U"}},36:function(e,t,n){e.exports={dialogsMessages:"DialogsMessages_dialogsMessages__3QP42",messages:"DialogsMessages_messages__3fvU4",sendBox:"DialogsMessages_sendBox__3hn7h",textarea:"DialogsMessages_textarea__3H-Xz",button:"DialogsMessages_button__2YtVE"}},37:function(e,t,n){e.exports={title:"MyPosts_title__3q_Ko",textarea:"MyPosts_textarea__3KLbu",buttons:"MyPosts_buttons__2wUXL",button:"MyPosts_button__2WbpQ",posts:"MyPosts_posts__3tZ1c"}},38:function(e,t,n){e.exports={loginPage:"Login_loginPage__-UEgp",form:"Login_form__2mvFD",rememberMe:"Login_rememberMe__2b5Bc",button:"Login_button__3J267",formSummaryError:"Login_formSummaryError__3cy0x"}},45:function(e,t,n){e.exports={titlePage:"Users_titlePage__-qQrJ",container:"Users_container__6F9oG",friendBox:"Users_friendBox__2qTnN",imgBox:"Users_imgBox__3UYsy",img:"Users_img__3OuDf",followBtn:"Users_followBtn__3m1nP",btn:"Users_btn__9AIH5",red:"Users_red__3k9_c",green:"Users_green__2qlvh",infoBox:"Users_infoBox__m1z_G",infoBottom:"Users_infoBottom__3bLuP",title:"Users_title__2S65O",name:"Users_name__3Kys8",description:"Users_description__QFQc5",showBtn:"Users_showBtn__1c0oR",activePage:"Users_activePage__28hh7",pages:"Users_pages__2ZPtK",disabled:"Users_disabled__vXtPd",searchBox:"Users_searchBox__mpTlb",search:"Users_search__hHCLT"}},56:function(e,t,n){e.exports={formControl:"FormsControls_formControl__25f9o",error:"FormsControls_error__1ZFL7"}},57:function(e,t,n){e.exports={imageBox:"Profile_imageBox__1et71",arrow:"Profile_arrow__te3cM",arrowRight:"Profile_arrowRight__3ifeA"}},58:function(e,t,n){e.exports={activePage:"Pagination_activePage__326ou",pages:"Pagination_pages__3AkbG"}},59:function(e,t,n){e.exports={logo:"Header_logo__3_SJs",loginBox:"Header_loginBox__1Y8Fj",logoutBtn:"Header_logoutBtn__WX_GL",greeting:"Header_greeting__1RmOx"}},73:function(e,t,n){e.exports={friend:"Friend_friend__3qKjq",img:"Friend_img__3KzQt",name:"Friend_name__33ANY"}},74:function(e,t,n){e.exports={dialogPage:"Dialogs_dialogPage__3cRJY",dialogsColumn:"Dialogs_dialogsColumn__y5DL0"}},75:function(e,t,n){e.exports={dialog:"DialogItem_dialog__3tDA2",img:"DialogItem_img__30y70",active:"DialogItem_active__2qnc5"}},93:function(e,t,n){e.exports={appWrapper:"App_appWrapper__3rnam",content:"App_content__3La4L"}},94:function(e,t,n){e.exports={title:"FriendsPanel_title__2_gYF",friends:"FriendsPanel_friends__3pdJ2"}},99:function(e,t,n){e.exports={loadingGif:"Preloader_loadingGif__lFy-A",loadingBox:"Preloader_loadingBox__1-RkT"}}},[[293,1,2]]]);
//# sourceMappingURL=main.e18e343f.chunk.js.map